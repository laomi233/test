import React from 'react';
import {
  MapTo,
  Container,
  AllowedComponentsContainer,
  withComponentMappingContext
} from '@adobe/aem-react-editable-components';

const CardContainer = (props) => {
  const {
    cqItems = {},
    cqItemsOrder = [],
    cqPath = '',
    allowedComponents
  } = props;

  const leftContainer = cqItems["leftcontainer"];
  const rightContainer = cqItems["rightcontainer"];

  return (
    <div className="card-container-flex">
      <div className="cardcontainer-leftcontainer" style={{ width: '75%' }}>
        <Container
          cqPath={`${cqPath}/leftcontainer`}
          cqItems={leftContainer?.items}
          cqItemsOrder={leftContainer?.itemsOrder}
          allowedComponents={allowedComponents}
          isInEditor={true}
        />
        <AllowedComponentsContainer
          cqPath={`${cqPath}/leftcontainer`}
          allowedComponents={allowedComponents}
        />
      </div>

      <div className="cardcontainer-rightcontainer" style={{ width: '25%' }}>
        <Container
          cqPath={`${cqPath}/rightcontainer`}
          cqItems={rightContainer?.items}
          cqItemsOrder={rightContainer?.itemsOrder}
          allowedComponents={allowedComponents}
          isInEditor={true}
        />
        <AllowedComponentsContainer
          cqPath={`${cqPath}/rightcontainer`}
          allowedComponents={allowedComponents}
        />
      </div>
    </div>
  );
};

CardContainer.isEmpty = function (props) {
  return (
    !props.cqItems ||
    !props.cqItems["leftcontainer"] ||
    !props.cqItems["rightcontainer"]
  );
};

export default MapTo('yourproject/components/cardcontainer')(
  withComponentMappingContext(CardContainer)
);
